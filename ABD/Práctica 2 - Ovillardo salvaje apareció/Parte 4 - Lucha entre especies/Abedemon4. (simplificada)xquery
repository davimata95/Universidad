xquery version "3.0";

declare variable $yoId as xs:string external;
declare variable $adversarioId as xs:string external;

(: Me quedo mis ataques :)
let $yo := doc("Abedemon.xml")//especie[@id = $yoId]
let $yoAtaques := $yo/ataques/tiene-ataque/@id

(: Me quedo con ataques del adversario :)
let $adversario := doc("Abedemon.xml")//especie[@id = $adversarioId]
let $adversarioTipo := $adversario/tipo

(: Me quedo con el m치ximo da침o hacia mi adversario :)
let $ataques := doc("Abedemon.xml")/bd-abedemon/ataque[@id = $yoAtaques and da침o/@tipo = $adversarioTipo]
let $maxValor := $ataques/da침o[@tipo = $adversarioTipo]/@valor

return max($maxValor)